\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[a4paper,top=2cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}
\geometry{a4paper} 
\usepackage{amsmath}
\usepackage{physics}
\usepackage{color,soul}
\DeclareMathOperator{\di}{d\!}
\newcommand*\Eval[3]{\left.#1\right\rvert_{#2}^{#3}}
\newcommand{\inlist}[1]{\texttt{#1}}

\author{J L Kaplan}

\begin{document}

\section*{SICP Exercise 1.13}
\subsection*{Real number Fibonacci sequence}

Let $\tilde{f}(n) = \phi^n / \sqrt{5}$. Let $R(x)$ be a rounding function. First, let's check the base cases.

\begin{equation}
  R(\tilde{f}(0)) = R \left( \frac{1}{\sqrt{5}} \right) = 0,
\end{equation}

\begin{equation}
  R(\tilde{f}(1)) = R \left( \frac{1 + \sqrt{5}}{2 \sqrt{5}} \right) = 1.
\end{equation}

Now we can test whether the recurrence relation holds.

\begin{equation}
  \tilde{f}(n) = \tilde{f}(n-1) \tilde{f}(n-2),
\end{equation}

\begin{equation}
  \frac{(1 + \sqrt{5})^n}{2^n \sqrt{5}} = \frac{(1 + \sqrt{5})^{n-1}}{2^{n-1} \sqrt{5}} + \frac{(1 + \sqrt{5})^{n-2}}{2^{n-2} \sqrt{5}},
\end{equation}

\begin{equation}
  (1 + \sqrt{5})^2 = 2 (1 + \sqrt{5}) + 4,
\end{equation}

\begin{equation}
  6 + 2 \sqrt{5} = 6 + 2 \sqrt{5}.
\end{equation}

Thus the recurrence relation holds for the real number recurrence relation.

\subsection*{Integer Fibonacci sequence}

Introducing the rounding correction:

\begin{equation}
  \hat{f}(n) = \psi^n = \frac{(1 - \sqrt{5})^n}{2^n \sqrt{5}},
\end{equation}

in combination with the real number Fibonacci term

\begin{equation}
  F(n) = \tilde{f}(n) - \hat{f}(n) = \frac{\phi^n - \psi^n}{\sqrt{5}},
\end{equation}

we can check the base cases

\begin{equation}
  F(0) = \frac{1 - 1}{\sqrt{5}} = 0,
\end{equation}

\begin{equation}
  F(1) = \frac{1 + \sqrt{5} - (1 - \sqrt{5})}{2 \sqrt{5}} = 1.
\end{equation}

Again, test the recurrence relation holds.

\begin{equation}
  \frac{(1 + \sqrt{5})^{n} - (1 - \sqrt{5})^{n}}{2^n \sqrt{5}} = \frac{(1 + \sqrt{5})^{n-1} - (1 - \sqrt{5})^{n-1}}{2^{n-1} \sqrt{5}} + \frac{(1 + \sqrt{5})^{n-2} - (1 - \sqrt{5})^{n-2}}{2^{n-2} \sqrt{5}} 
\end{equation}


\end{document}
